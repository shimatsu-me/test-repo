## 各層（ディレクトリ）の説明

## presentation 層

### handler

ルーティングと入出力を扱う。
入力値のバリデーションも必須項目と型が合ってるか位はここで扱います

## usecase 層

### usecase

domain 層とクエリサービスの機能を組み合わせて、アクターのユースケース(アクション)を実現する。組み合わせるだけなので基本的に薄い実装になります。
１アクター１ユースケースなので、現在は１クライアントアプリ１ユースケースで実装しています。

### query service

コマンドクエリ分離（CQRS）をしているので、参照系の処理はこのファイルで扱います。
１ユースケース、１クエリサービスとしています。

## domain 層

### model

ビジネスロジックを詰め込んだファイル。
domain model だけを確認すれば、どんなビジネスルールが存在するか理解できるように実装する。
また完全コンストラクタとしているので、常に不変で有ることと、
インスタンス化されてから消えるまで、常に正しく有り続けます。

### value object

値オブジェクト。リポジトリ関連の値を担当するオブジェクトになります。
リポジトリ関連のバリデーションはこのファイルに全て実装します。
テーブルのプロパティではなく、あくまで値である事に注意してください。
値オブジェクトもまた、完全コンストラクタになります。

### repository

技術的関心事を詰め込んだファイル。DB 登録、メール送信等、
技術的且つ具体的な処理はこのファイルに実装します。
また、集約としても機能させているので、1 集約 1 リポジトリとなっています。

### domain service

ドメインロジックではあるが、他の domain 層に置き場所がない処理を担当します。
便利ではありますが、基本的にはモデルや値オブジェクトに実装できないか、
良く考えてから使用してください。
また、１リポジトリ１ドメインサービスで実装してください。

## 補足説明

### レイヤードアーキテクチャ

このアプリケーションはレイヤードアーキテクチャを意識して作られています。
各層の依存関係は、presentation → usecase → domain/repository → domain/model
となっています。

### 集約パターン

1repository 1 集約。
集約とは、各モデルをトランザクション境界で区切ってまとめた物になります。
簡単に言うとデータの整合性を担保したいまとまりになります。
＊1table 1 集約ではありません。

### CQRS パターン

CRUD の R（クエリ）と CUD（コマンド）を明確に分けて実装するパターンになります。
コマンドは集約としてリポジトリから、クエリはクエリサービスに実装して下さい。
